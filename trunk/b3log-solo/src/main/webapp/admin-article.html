<table class="form" width="99%" cellpadding="0px" cellspacing="9px">
    <tbody>
        <tr>
            <th>
                ${title1Label}
            </th>
            <td>
                <input id="title" type="text"/>
            </td>
        </tr>
        <tr>
            <th>
                ${content1Label}
            </th>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td colspan="2">
                <textarea cols="80" rows="12" id="articleContent"></textarea>
            </td>
        </tr>
        <tr>
            <th>tagsï¼š</th>
            <td>
                <input id="tag" type="text"/>
            </td>
        </tr>
        <tr>
            <th valign="top">${abstract1Label}</th>
            <td>
                <textarea id="abstract" rows="3" cols="80"></textarea>
            </td>
        </tr>
        <tr>
            <th colspan="2">
                <button id="submitArticle">${postLabel}</button>
            </th>
        </tr>
    </tbody>
</table>
<script type="text/javascript">
    var addArticle = function () {
        var requestJSONObject = {
            "article": {
                "articleTitle": $("#title").val(),
                "articleContent": KE.html("articleContent"),
                "articleAbstract": $("#abstract").val(),
                "articleTags": $("#tag").val()
            }
        };
        jsonRpc.articleService.addArticle(function (result, error) {
            switch (result.sc) {
                case "ADD_ARTICLE_SUCC":
                    setCurrentNaviStyle(1);
                    $("#content").load("admin-article-list.do", function () {
                        KE.remove("articleContent");
                    });
                    $("#tipMsg").text("${addSuccLabel}");
                    break;
                default:
                    break;
            }
        }, requestJSONObject);
    }

    var updateArticle = function () {
        var requestJSONObject = {
            "article": {
                "oId": $("#title").data("oId"),
                "articleTitle": $("#title").val(),
                "articleContent": KE.html("articleContent"),
                "articleAbstract": $("#abstract").val(),
                "articleTags": $("#tag").val()
            }
        };
        jsonRpc.articleService.updateArticle(function (result, error) {
            switch (result.sc) {
                case "UPDATE_ARTICLE_SUCC":
                    setCurrentNaviStyle(1);
                    $("#content").load("admin-article-list.do", function () {
                        KE.remove("articleContent");
                    });
                    $("#tipMsg").text("${updateSuccLabel}");
                    break;
                default:
                    break;
            }
        }, requestJSONObject);
    }

    $("#submitArticle").click(function () {
        if ($("#title").data("oId")) {
            updateArticle();
        } else {
            addArticle();
        }
    });
</script>
