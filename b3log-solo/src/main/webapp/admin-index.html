<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>${adminConsoleLabel}</title>
        <script type="text/javascript" src="js/lib/jquery/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="js/lib/jsonrpc.min.js"></script>
        <script type="text/javascript" src="js/json-rpc.js"></script>
        <script type="text/javascript" src="js/lib/jquery/jquery.bowknot.min.js"></script>
        <script type="text/javascript" src="js/lib/editor/kindeditor-min.js"></script>
        <link type="text/css" rel="stylesheet" href="styles/default-admin.css"/>
        <link type="text/css" rel="stylesheet" href="styles/default-bowknot.css"/>
        <link type="text/css" rel="stylesheet" href="styles/default-base.css"/>
    </head>
    <body>
        <#include "common-top.html">
        <div id="tipMsg" class="error-msg"></div>
        <div id="allPanel">
            <div class="left side">
                <ul id="navi">
                    <li>
                        <span>${postArticleLabel}</span>
                    </li>
                    <li>
                        <span>${articleListLabel}</span>
                    </li>
                    <li>
                        <span>${linkManagementLabel}</span>
                    </li>
                    <li>
                        <span>${preferenceLabel}</span>
                    </li>
                    <li>
                        <span>${blogSyncLabel}</span>
                    </li>
                </ul>
            </div>
            <div class="left" id="main">
                <div id="content">
                </div>
            </div>
            <div class="clear"></div>
            <div class="footer">
                <#include "article-footer.html">
            </div>
        </div>
        <script type="text/javascript">
            (function () {
                // tipMsg
                setInterval(function () {
                    if($("#tipMsg").text() !== "") {
                        setTimeout(function () {
                            $("#tipMsg").text("");
                        }, 6000);
                    }
                }, 6000);

                // resize
                var $main = $("#main");
                var leftWidth = $(".side").width() + $.bowknot.strToInt($main.css("padding-left"))
                    + $.bowknot.strToInt($main.css("padding-right")) + 17;

                $("#main").css("width", window.innerWidth - leftWidth);
                $(window).resize(function () {
                    $("#main").css("width", window.innerWidth - leftWidth);
                });
            })();

            // navi
            $("#navi li").each(function (i) {
                var naviURL = ['article', 'article-list', 'link-list', 'preference', 'article-sync'],
                $it = $(this);
                $it.click(function () {
                    var loadURL = "admin-" + naviURL[i] + ".do";
                    if (!$it.hasClass("selected")){
                        $("#navi li").removeClass('selected');
                        $it.addClass('selected');
                    }
                    $("#content").load(loadURL, function () {
                        if ($("#articleContent").length > 0) {
                            KE.init({
                                id : "articleContent",
                                items : ['fontname', 'fontsize', '|', 'textcolor', 'bgcolor', 'bold', 'italic', 'underline',
                                    'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
                                    'insertunorderedlist', '|', 'emoticons', 'image', 'link']
                            });

                            KE.create("articleContent");
                        } else {
                            if (KE.g["articleContent"]) {
                                KE.remove("articleContent");
                            }
                        }
                    });
                });
            }).mouseover(function () {
                $(this).addClass('hover');
            }).mouseout(function () {
                $(this).removeClass('hover');
            });

            // util
            var setCurrentNaviStyle = function (i) {
                $("#navi li").removeClass('selected');
                $($("#navi li").get(i)).addClass("selected");
            }
        </script>
    </body>
</html>
