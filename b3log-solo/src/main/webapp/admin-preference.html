<table class="form left" width="49%" cellpadding="0" cellspacing="9px">
    <tbody>
        <tr>
            <th width="124px">
                首页 Tag 显示数：
            </th>
            <td>
                <input id="mostUsedTagDisplayCount"/>
            </td>
        </tr>
        <tr>
            <th>
                最新文章显示数目:
            </th>
            <td>
                <input id="recentArticleDisplayCount"/>
            </td>
        </tr>
        <tr>
            <th>
                评论最多文章数目:
            </th>
            <td>
                <input id="mostCommentArticleDisplayCount"/>
            </td>
        </tr>
        <tr>
            <th>
                文章列表显示数:
            </th>
            <td>
                <input id="articleListDisplayCount"/>
            </td>
        </tr>
        <tr>
            <th>
                分页大小:
            </th>
            <td>
                <input id="articleListPaginationWindowSize"/>
            </td>
        </tr>
        <tr>
            <th>
                博客标题:
            </th>
            <td>
                <input id="blogTitle"/>
            </td>
        </tr>
        <tr>
            <th>
                博客子标题:
            </th>
            <td>
                <input id="blogSubtitle"/>
            </td>
        </tr>
        <tr>
            <th colspan="2">
                <button onclick="changePreference();">submit</button>
            </th>
        </tr>
    </tbody>
</table>
<div class="right" id="changeSkinPanel">
    {changeSkin}
</div>
<div class="clear"></div>
<script type="text/javascript">
    var changePreference = function () {
        var requestJSONObject = {
            "preference": {
                "blogTitle": $("#blogTitle").val(),
                "blogSubtitle": $("#blogSubtitle").val(),
                "mostCommentArticleDisplayCount": $("#mostCommentArticleDisplayCount").val(),
                "recentArticleDisplayCount": $("#recentArticleDisplayCount").val(),
                "mostUsedTagDisplayCount": $("#mostUsedTagDisplayCount").val(),
                "articleListDisplayCount": $("#articleListDisplayCount").val(),
                "articleListPaginationWindowSize": $("#articleListPaginationWindowSize").val(),
                "skinDirName": "classic" // TODO: preference skin select
            }
        }

        jsonRpc.preferenceService.updatePreference(function (result, error) {
            switch (result.sc) {
                case "UPDATE_PREFERENCE_SUCC":
                    $("#tipMsg").text("update preference sucess!");
                    break;
                case "GET_ARTICLE_FAIL_":
                    break;
                default:
                    break;
            }
        }, requestJSONObject);
    }

    var getPreference = function () {
        jsonRpc.preferenceService.getPreference(function (result, error) {
            switch (result.sc) {
                case "GET_PREFERENCE_SUCC":
                    $("#blogTitle").val(result.preference.blogTitle),
                    $("#blogSubtitle").val(result.preference.blogSubtitle),
                    $("#mostCommentArticleDisplayCount").val(result.preference.mostCommentArticleDisplayCount);
                    $("#recentArticleDisplayCount").val(result.preference.recentArticleDisplayCount);
                    $("#mostUsedTagDisplayCount").val(result.preference.mostUsedTagDisplayCount);
                    $("#articleListDisplayCount").val(result.preference.articleListDisplayCount);
                    $("#articleListPaginationWindowSize").val(result.preference.articleListPaginationWindowSize);
                    break;
                default:
                    break;
            }
        });
    }

    getPreference();
</script>