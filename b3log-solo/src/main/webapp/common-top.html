<div id="top">
    <a href="index.do" class="logo">
        <span style="color: orange;">B</span>
        <span style="color: blue;">3</span>
        <span style="color: green;">L</span>
        <span style="color: red;">O</span>
        <span style="color: blue;">G</span>
    </a>
    <span class="right">
        <span id="admin"></span>
    </span>
    <div class="clear"></div>
</div>
<script type="text/javascript">
    var setLoginState = function () {
        var isAdminLoggedIn = jsonRpc.adminService.isAdminLoggedIn();
        if (isAdminLoggedIn) {
            var loginHTML = "<a class='noUnderline' href='/_ah/logout?continue=%2Findex.do'>${logoutLabel}</a>&nbsp;|&nbsp;"
                + "<a class='noUnderline' href='#' onclick='clearAllCache();'>${clearAllCache}</a>&nbsp;|&nbsp;"
                + "<a class='noUnderline' href='#' onclick='clearCache();'>${clearCache}</a>&nbsp;|&nbsp;"
                + "<a class='noUnderline' href='admin-index.do'>${adminLabel}</a>";
            $("#admin").append(loginHTML);
        } else {
            $("#admin").append("<a class='noUnderline' href='/_ah/login?continue=%2Fadmin-index.do'>${loginLabel}</a>");
        }
    }

    setLoginState();

    var clearCache = function () {
        var locationString = window.location.toString();
        var cachedPageKey = locationString.substring(locationString.lastIndexOf("/"), locationString.length);
        alert(cachedPageKey);
        jsonRpc.adminService.clearCache(cachedPageKey);
        window.location.reload();
        alert(1);
    }

    var clearAllCache = function () {
        jsonRpc.adminService.clearAllPageCache();
        window.location.reload();
    }
</script>