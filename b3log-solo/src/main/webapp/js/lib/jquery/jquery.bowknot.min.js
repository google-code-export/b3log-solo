/*
 * Copyright (C) 2010, Liyuan Li
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function($){var Bowknot=function(){};$.extend(Bowknot.prototype,{bowknot:{version:"0.0.0.8",author:"lly219@gmail.com"},getDefaults:function(defaults,settings,key){if(key==="styleClass"){if(settings.theme==="default"||settings.theme===undefined){return defaults.styleClass}settings.styleClass={};for(var styleName in defaults[key]){settings.styleClass[styleName]=settings.theme+"-"+defaults.styleClass[styleName]}}else if((key==="height"&&settings[key]!=="auto")||key==="width"){if(settings[key]===null||settings[key]===undefined){return defaults[key]+"px"}else{return settings[key]+"px"}}else{if(settings[key]===null||settings[key]===undefined){return defaults[key]}}return settings[key]},strToInt:function(str){if(!str){return;}return parseInt(str.substring(0,str.length-2))},sortNumber:function(a,b){return a-b},getMaxNumber:function(arr){arr.sort(this.sortNumber);return arr[arr.length-1]},getMinNumber:function(arr){arr.sort(this.sortNumber);return arr[0]},getDate:function(a,b){var c=new Date(a);var d=c.getFullYear(),month=c.getMonth()+1,day=c.getDate(),hours=c.getHours(),seconds=c.getSeconds(),minutes=c.getMinutes();if(month<10){month="0"+month.toString()}if(day<10){day="0"+day.toString()}if(hours<10){hours="0"+hours.toString()}if(minutes<10){minutes="0"+minutes.toString()}if(seconds<10){seconds="0"+seconds.toString()}switch(b){case undefined:return d+"-"+month+"-"+day;break;case 1:return d+"-"+month+"-"+day+" "+hours+":"+minutes+":"+seconds;break;default:return false;break}},ellipsis:function(a,b){var c=0,strTrim=a.replace(/(^\s*)|(\s*$)/g,""),strArray=strTrim.split(""),resultStr="";for(var i=0;i<strArray.length;i++){if(c<b){if(strArray[i]&&strArray[i].match(/[^u4E00-u9FA5]/)){c+=2}else{c++}resultStr+=strArray[i]}}if(strTrim!==resultStr){resultStr+="..."}return resultStr},trimUnique:function(a){for(var i=0;i<a.length;i++){a[i]=a[i].replace(/(^\s*)|(\s*$)/g,"");if(a[i]===""){a.splice(i,1);i--}}return $.unique(a)},goTop:function(acceleration,time){acceleration=acceleration||0.1;time=time||16;var x1=0;var y1=0;var x2=0;var y2=0;var x3=0;var y3=0;if(document.documentElement){x1=document.documentElement.scrollLeft||0;y1=document.documentElement.scrollTop||0}if(document.body){x2=document.body.scrollLeft||0;y2=document.body.scrollTop||0}var x3=window.scrollX||0;var y3=window.scrollY||0;var x=Math.max(x1,Math.max(x2,x3));var y=Math.max(y1,Math.max(y2,y3));var speed=1+acceleration;window.scrollTo(Math.floor(x/speed),Math.floor(y/speed));if(x>0||y>0){var invokeFunction="$.bowknot.goTop("+acceleration+", "+time+")";window.setTimeout(invokeFunction,time)}}});$.bowknot=new Bowknot()})(jQuery);
(function($){$.fn.extend({paginate:{version:"0.0.1.1",author:"lly219@gmail.com"}});var h=new Date().getTime();var k="paginate";var l=function(){this._defaults={"styleClass":{"pageCountClass":"pagination-pageCount","goPageClass":"pagination-goPage","prePageClass":"pagination-prePage","nextPageClass":"pagination-nextPage","lastPageClass":"pagination-lastPage","firstPageClass":"pagination-firstPage","prePageHoverClass":"pagination-prePageHover","nextPageHoverClass":"pagination-nextPageHover","lastPageHoverClass":"pagination-lastPageHover","firstPageHoverClass":"pagination-fitstPageHover","goInputClass":"pagination-goInput","submitClass":"pagination-submit","pageClass":"pagination-page","pageHoverClass":"pagination-pageHover","pageCurrentClass":"pagination-pageCurrent","paginationClass":"pagination-pagination"},"pageCount":1,"currentPage":1,"windowSize":5,"bindEvent":"","isGoTo":true,"isPageCount":true,"theme":"default","errorMessage":undefined,"style":"taobao","firstPage":"","lastPage":"","nextPage":"","previousPage":""}};$.extend(l.prototype,{_attach:function(a,b){if(!a.id){this.uuid++;a.id="dp"+this.uuid}var c=this._newInst($(a));c.settings=$.extend({},b||{});$.data(a,k,c);this._init(a)},_newInst:function(a){var b=a[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:b}},_getInst:function(a){try{return $.data(a,k)}catch(err){throw"Missing instance data for this pagination";}},_destroyPagination:function(){},_updatePagination:function(a,b){var c=this._getInst(a),settings=c.settings;for(var d in b){if(typeof(b[d])==="string"||d==="data"||typeof(b[d])==="number"){settings[d]=b[d]}else{settings[d]=$.extend(settings[d],b[d])}}$.paginate._build(a)},_init:function(a){var b=this._getInst(a);var c=b.id,settings=b.settings;$("#"+c).append("<div id='"+c+"Pagination' class='"+$.paginate._getDefaults($.paginate._defaults,settings,"styleClass").paginationClass+"'></div>");this._build(a)},_build:function(a){var b=this._getInst(a);var c=b.id,settings=b.settings;var d=$.paginate._getDefaults($.paginate._defaults,settings,"currentPage"),pageCount=settings.pageCount,pages=[],bindEvent=settings.bindEvent,styleClass=$.paginate._getDefaults($.paginate._defaults,settings,"styleClass");var e="",pageCountHTML="",goToPageHTML="",windowSize=$.paginate._getDefaults($.paginate._defaults,settings,"windowSize"),style=$.paginate._getDefaults($.paginate._defaults,settings,"style");if($.paginate._getDefaults($.paginate._defaults,settings,"isGoTo")){goToPageHTML="<div class='bowknot-left'>到</div><input class='"+styleClass.goInputClass+"' id='"+c+"PaginationInput'/><div class='bowknot-left'>页</div>&nbsp;<button class='"+styleClass.submitClass+"' id='"+c+"PaginationSubmit'>确定</button>"}if($.paginate._getDefaults($.paginate._defaults,settings,"isPageCount")){pageCountHTML="<div class='bowknot-left'>&nbsp;共"+pageCount+"页&nbsp;</div>"}switch(style){case"taobao":pages=this._getTaobaoPages(d,pageCount);break;case"google":pages=this._getGooglePages(d,pageCount,windowSize);break;default:alert("has no style!");break}for(var i=0;i<pages.length;i++){var f=" class='"+styleClass.pageClass+"'",currPageNumber=0,currDisplayPageNumber=0;if(pages[i]===d){f=" class='"+styleClass.pageCurrentClass+"'"}if(typeof(pages[i])==="number"){currPageNumber=currDisplayPageNumber=pages[i]}else{var g=pages[i].split("&");currPageNumber=parseInt(g[0]);currDisplayPageNumber=g[1];if(currDisplayPageNumber===">"){f=" class='"+styleClass.nextPageClass+"'"}if(currDisplayPageNumber==="<"){f=" class='"+styleClass.prePageClass+"'"}}e+="<span title='"+currPageNumber+"' onclick=\"jQuery.paginate._changePages('"+c+"');"+bindEvent+"("+currPageNumber+")\""+f+">"+currDisplayPageNumber+"</span>"}if(pages[0]!==1){if(settings.previousPage){e="<span class='"+styleClass.prePageClass+"' title='"+(d-1)+"' onclick=\"jQuery.paginate._changePages('"+c+"');"+bindEvent+"("+(d-1)+");\">"+settings.previousPage+"</span>"+e}if(settings.firstPage){e="<span title='1' class='"+styleClass.firstPageClass+"' onclick=\"jQuery.paginate._changePages('"+c+"');"+bindEvent+"(1);\">"+settings.firstPage+"</span>"+e}}if(pages[pages.length-1]!==pageCount){if(settings.nextPage){e+="<span class='"+styleClass.nextPageClass+"' title='"+(d+1)+"' onclick=\"jQuery.paginate._changePages('"+c+"');"+bindEvent+"("+(d+1)+");\">"+settings.nextPage+"</span>"}if(settings.lastPage){e+="<span class='"+styleClass.lastPageClass+"' title='"+pageCount+"' onclick=\"jQuery.paginate._changePages('"+c+"');"+bindEvent+"("+pageCount+");\">"+settings.lastPage+"</span>"}}$("#"+c+"Pagination").html(e+pageCountHTML+goToPageHTML);$("#"+c+"Pagination span").mouseover(function(){if($(this).hasClass(styleClass.prePageClass)){this.className=styleClass.prePageHoverClass}else if($(this).hasClass(styleClass.nextPageClass)){this.className=styleClass.nextPageHoverClass}else{$(this).addClass(styleClass.pageHoverClass)}}).mouseout(function(){if($(this).hasClass(styleClass.prePageHoverClass)){this.className=styleClass.prePageClass}else if($(this).hasClass(styleClass.nextPageHoverClass)){this.className=styleClass.nextPageClass}else{$(this).removeClass(styleClass.pageHoverClass)}});$("#"+c+"PaginationInput").bind("keypress",{target:a},$.paginate._goToPage).focus();$("#"+c+"PaginationSubmit").bind("click",{target:a},$.paginate._goToPage)},_changePages:function(a){var b=a;if(typeof(a)==="string"){b=$("#"+a)[0]}$.paginate._build(b)},_goToPage:function(a){var b=a.data.target;var c=$.paginate._getInst(b);var d=c.id,settings=c.settings;var e=parseInt($("#"+d+"PaginationInput").val());if(this.id.search(/PaginationInput/)!==-1&&a.keyCode!==13){return}settings.currentPage=parseInt($("#"+d+"PaginationInput").val());if(e>0&&e<=settings.pageCount){eval(settings.bindEvent+"("+e+");");$.paginate._changePages(d)}else if(settings.errorMessage){alert(settings.errorMessage);$("#"+d+"PaginationInput").val("")}},_getGooglePages:function(a,b,c){var d=[];if(b<c){for(var i=0;i<b;i++){d.push(i+1)}}else{var e=a-parseInt(c/2);e=e<1?1:e;e=e+c>b?b-c+1:e;for(var j=0;j<c;j++){d.push(e+j)}}return d},_getTaobaoPages:function(a,b){var c=[],i=2,len=4,begin=3,end=0,maxEnd=0,pre=0;if(a>=len){begin=a-Math.ceil(len/2);maxEnd=a+Math.ceil(len/2)+1;if(maxEnd<b){end=maxEnd}else{end=b}}else if(a<len){maxEnd=a+Math.ceil(len/2)+1;if(maxEnd<b){end=maxEnd}else{end=b}}if(begin<3){begin=3}for(i=begin;i<=end;i++){c.push(i)}if(begin>3){pre=2+(begin-2);c.unshift(pre+"&...")}if(b<2){i=(a===0)?0:1}else{i=2}for(;i>=1;i=i-1){c.unshift(i)}if(end<b){pre=end+Math.ceil(len/2);if(pre>b){pre=b}c.push(pre+"&...")}if(a>1){c.splice(0,0,(a-1)+"&<")}if(a<b){c.push((a+1)+"&>")}return c},_getDefaults:function(a,b,c){if(c==="styleClass"){if(b.theme==="default"||b.theme===undefined){return a.styleClass}b.styleClass={};for(var d in a[c]){b.styleClass[d]=b.theme+"-"+a.styleClass[d]}}else if((c==="height"&&b[c]!=="auto")||c==="width"){if(b[c]===null||b[c]===undefined){return a[c]+"px"}else{return b[c]+"px"}}else{if(b[c]===null||b[c]===undefined){return a[c]}}return b[c]}});$.fn.paginate=function(a){var b=Array.prototype.slice.call(arguments);return this.each(function(){if(a.update){$.paginate._updatePagination(this,a.update)}else{typeof a==="string"?$.paginate["_"+a+"Pagination"].apply($.paginate,[this].concat(b)):$.paginate._attach(this,a)}})};$.paginate=new l();window["DP_jQuery_"+h]=$})(jQuery);
(function($){$.fn.extend({table:{version:"0.0.0.1",author:"lly219@gmail.com"}});var q=new Date().getTime();var r="table";var s=function(){this._defaults={"styleClass":{"highlightClass":"table-heiglight","mainClass":"table-main","bodyClass":"table-body","headerClass":"table-header","lineHoverClass":"table-lineHover","oddRowClass":"table-oddRow","evenRowClass":"table-evenRow","upIconClass":"table-upIcon","downIconClass":"table-downIcon","centerClass":"table-center"}},this._settingsDataFormat={}};$.extend(s.prototype,{_attach:function(a,b){if(!a.id){this.uuid++;a.id="dp"+this.uuid}var c=this._newInst($(a));c.settings=$.extend({},b||{});$.data(a,r,c);this._init(a)},_newInst:function(a){var b=a[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:b}},_getInst:function(a){try{return $.data(a,r)}catch(err){throw"Missing instance data for this table";}},_destroyTable:function(){},_updateTable:function(a,b){var c=this._getInst(a),settings=c.settings;for(var d in b){if(typeof(b[d])==="string"||typeof(b[d])==="number"||d==="data"){settings[d]=b[d]}else{settings[d]=$.extend(settings[d],b[d])}}this._build(a)},_init:function(a){var b=this._getInst(a),settings=b.settings;$(a).append("<div class='"+$.table._getDefaults($.table._defaults,settings,"styleClass").mainClass+"' id='"+b.id+"Table'></div>");this._build(a)},_build:function(a){var b=this._getInst(a),settings=b.settings;var c=$.table._getDefaults($.table._defaults,settings,"resizable"),styleClass=$.table._getDefaults($.table._defaults,settings,"styleClass");var d=c?"<div class='"+styleClass.verticalLineClass+"' id='"+b.id+"VerticalLine'></div>":"";var e=d+"<div id='"+b.id+"TableHeader' class='"+styleClass.headerClass+"'></div>"+"<div id='"+b.id+"TableMain' class='"+styleClass.bodyClass+"'></div>";$("#"+b.id+"Table").html(e).css("position","relative");this._buildHeader(a);if(settings.data){this._buildBody(a);this._bindEvent(a)}},_buildHeader:function(a){var b=this._getInst(a).settings;var c=b.colModel,id=this._getInst(a).id,styleClass=$.table._getDefaults($.table._defaults,b,"styleClass"),headerHTML="<table cellpadding='0' cellspacing='0' style='width:100%'><tr>";for(var i=0;i<c.length;i++){if(c[i].visible===undefined){var d=id+"_"+c[i].index;if(c[i].minWidth){headerHTML+="<th style='min-width:"+c[i].minWidth+"px;'>"}else{headerHTML+="<th style='width:"+c[i].width+"px;'>"}if(c[i].inputType==="checkbox"&&c[i].allSelected){headerHTML+="<input id='"+d+"' onclick=\"DP_jQuery_"+q+".table._selectHeaderCheckbox(this,'"+styleClass.highlightClass+"');\" type='"+c[i].inputType+"'/></th>"}else{headerHTML+="<span id='"+d+"'>"+c[i].name+"</span></th>"}}}$("#"+id+"TableHeader").html(headerHTML+"</tr></table>")},_buildBody:function(a){var b=this._getInst(a).id,settings=this._getInst(a).settings,resultObj={},bodyHTML="",data=[];resultObj=this._buildTableBody(a,-1);bodyHTML=resultObj.bodyHTML;data=settings.data;$("#"+b+"TableMain").html(bodyHTML);if(resultObj.checkAllId!==""){var c=$.table._getInvisibleData(settings.colModel,data,resultObj.checkedArray);for(var d in c){$("#"+resultObj.checkAllId).data(d,c[d])}}},_buildTableBody:function(a,b){var c=this._getInst(a).id,settings=this._getInst(a).settings;var d=settings.colModel,checkAllId="",checkedArray=[],styleClass=$.table._getDefaults($.table._defaults,settings,"styleClass");var e="<table style='width:100%;' cellpadding='0' cellspacing='0'>",data=[],currentDataNum=0;data=settings.data;for(var f=0;f<b;f++){currentDataNum+=settings.subData[f].data.length}for(var i=0;i<data.length;i++){var g=data[i],j=0,trHTML="",tdHTML="",rowClass=styleClass.oddRowClass;if(i%2===1){rowClass=styleClass.evenRowClass}trHTML+='<tr class="$CLASS" '+' onmouseover="DP_jQuery_'+q+'.table._mouseoverRow(this, \''+styleClass.lineHoverClass+'\', \''+styleClass.highlightClass+'\');"'+' onmouseout="DP_jQuery_'+q+'.table._mouseoutRow(this, \''+styleClass.lineHoverClass+'\');">';for(var h in g){var k=d[j].index;for(var l in g){if(k===l&&d[j].visible===undefined){var m=g[l],textAlignHTML=d[j].textAlign?"text-align:"+d[j].textAlign+";":"";if(i===0){if(d[j].minWidth){tdHTML+="<td style='"+"min-width:"+d[j].minWidth+"px;"+textAlignHTML+"'>"}else{tdHTML+="<td style='"+"width:"+d[j].width+"px;"+textAlignHTML+"'>"}}else{tdHTML+="<td style='"+textAlignHTML+"'>"}if(d[j].inputType==="checkbox"){var n="",isCheckedHTML="",isDisabledHTML="",checkId=c+"_"+l+"_"+(i+currentDataNum);checkAllId=c+"_"+l;if(data[i][l].value){isCheckedHTML="checked='checked'";trHTML=trHTML.replace("$CLASS",styleClass.highlightClass+" "+rowClass);checkedArray.push(i+currentDataNum)}if(data[i][l].disabled){isDisabledHTML="disabled='disabled'"}n="<input id='"+checkId+"' type='"+d[j].inputType+"' onclick=\"DP_jQuery_"+q+".table._selectCheckbox(this, '"+styleClass.highlightClass+"');\" "+isCheckedHTML+" "+isDisabledHTML+"/>";m=n}if(d[j].inputType==="order"){var o="<span class='"+styleClass.downIconClass+"' onclick=\""+settings.orderActionName+"("+i+", 'down');\"></span>",upHTML="<span class='"+styleClass.upIconClass+"' onclick=\""+settings.orderActionName+"("+i+", 'up');\"></span>";var p="";if(i===0&&data.length>1){p="<div style='width:16px' class='"+styleClass.centerClass+"'>"+o+"</div>"}else if(i<data.length-1){p="<div style='width:38px' class='"+styleClass.centerClass+"'>"+upHTML+o+"</div>"}else if(i!==0||data.length!==1){p="<div style='width:16px' class='"+styleClass.centerClass+"'>"+upHTML+"</div>"}m=p}if(d[j].style){m="<div style='"+d[j].style+"'>"+m+"</div>"}tdHTML+=m+"</td>"}}j++}e+=trHTML.replace("$CLASS",rowClass)+tdHTML+"</tr>"}return{"bodyHTML":e+"</table>","checkAllId":checkAllId,"checkedArray":checkedArray}},_bindEvent:function(a){var b=$.table._getInst(a);var c=b.id,settings=b.settings,colModel=b.settings.colModel,data=settings.data;for(var i=0;i<colModel.length;i++){if(colModel[i].bindEvent){for(var j=0;j<data.length;j++){var d=$($($($("#"+c+"TableMain tr").get(j)).find("td")).get(i));var e=$.table._getInvisibleData(colModel,data,[j]);for(var k=0;k<colModel[i].bindEvent.length;k++){d.bind(colModel[i].bindEvent[k].eventName,e,colModel[i].bindEvent[k].action)}}}}},_getInvisibleData:function(a,b,c){var d={};for(var i=0;i<a.length;i++){if(a[i].visible===false){var e=[];for(var j=0;j<c.length;j++){e.push(b[c[j]][a[i].index])}d[a[i].index]=e}}return d},_mouseoverRow:function(a,b,c){if(!$(a).hasClass(c)){$(a).addClass(b)}},_mouseoutRow:function(a,b){$(a).removeClass(b)},_selectHeaderCheckbox:function(a,b){var c=a.id.split("_");var d=c[0],index=c[1];var e=$("#"+d).data(r).settings;var f=e.data,colModel=e.colModel,temp=[];for(var i=0;i<colModel.length;i++){if(colModel[i].index===index){for(var j=0;j<f.length;j++){var g=d+"_"+index+"_"+j;var h=document.getElementById(g);if(a.checked){if((f[j][index].disabled&&f[j][index].value)||!f[j][index].disabled){f[j][index].value=true;$("#"+g).attr("checked","checked");temp.push(j);if(h.parentNode.parentNode.className.indexOf(b)<0){h.parentNode.parentNode.className=h.parentNode.parentNode.className+" "+b}}}else{if(f[j][index].disabled&&f[j][index].value){temp.push(j)}else{f[j][index].value=false;$("#"+g).removeAttr("checked");h.parentNode.parentNode.className=h.parentNode.parentNode.className.replace(b,"")}}}}}var k=$.table._getInvisibleData(e.colModel,f,temp);for(var l in k){$(a).data(l,k[l])}},_selectCheckbox:function(a,b){var c=a.id.split("_");var d=c[0],index=c[1],order=c[2];var e=d+"_"+index;var f=$("#"+d).data(r).settings;var g=f.colModel,data=f.data,className=a.parentNode.parentNode.className,checkedArray=[];data[order][index].value=a.checked;for(var i=0;i<data.length;i++){if(data[i][index].value){checkedArray.push(i)}}var h=$.table._getInvisibleData(g,data,checkedArray);for(var j in h){$("#"+e).data(j,h[j])}if(a.checked){a.parentNode.parentNode.className=className+" "+b}else{a.parentNode.parentNode.className=className.replace(b,"")}if(checkedArray.length===data.length){$("#"+e).attr("checked","checked")}else{$("#"+e).removeAttr("checked")}},_changeOrderTable:function(a,b,c){var d=this._getInst(a);var e=d.settings.data,srcOrder=c;if(b==="up"){srcOrder-=1}else{srcOrder+=1}var f=e[srcOrder];e.splice(srcOrder,1);e.splice(c,0,f);$.table._updateTable(a,{data:e})},_optionTable:function(a,b){var c=this._getInst(a);return c.settings[b]},_getDefaults:function(a,b,c){if(c==="styleClass"){if(b.theme==="default"||b.theme===undefined){return a.styleClass}b.styleClass={};for(var d in a[c]){b.styleClass[d]=b.theme+"-"+a.styleClass[d]}}else{if(b[c]===null||b[c]===undefined){return a[c]}}return b[c]},_strToInt:function(a){if(!a){return false}return parseInt(a.substring(0,a.length-2))}});$.fn.table=function(a){var b=Array.prototype.slice.call(arguments);if(typeof a==='string'&&arguments.length>1){b.shift();return $.table['_'+a+'Table'].apply($.table,[this[0]].concat(b))}return this.each(function(){typeof a==="string"?$.table["_"+a+"Table"].apply($.table,[this].concat(b)):$.table._attach(this,a)})};$.table=new s();window["DP_jQuery_"+q]=$})(jQuery);
(function($){$.fn.extend({dialog:{version:"0.0.0.9",author:"lly219@gmail.com"}});var dpuuid=new Date().getTime();var PROP_NAME='dialog';var Dialog=function(){this._defaults={"styleClass":{"backgroundClass":"dialog-background","panelClass":"dialog-panel","contentClass":"dialog-content","closeClass":"dialog-close"},closeEvent:""},this._settingsDataFormat={height:300,widht:400}};$.extend(Dialog.prototype,{_attach:function(target,settings){if(!target.id){this.uuid++;target.id='dp'+this.uuid}var inst=this._newInst($(target));inst.settings=$.extend({},settings||{});$.data(target,PROP_NAME,inst);this._init(target)},_newInst:function(target){var id=target[0].id.replace(/([^A-Za-z0-9_])/g,'\\\\$1');return{id:id}},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw'Missing instance data for this dialog';}},_destroyBowknot:function(){},_init:function(target){var inst=this._getInst(target);var id=inst.id,settings=inst.settings;var styleClass=$.bowknot.getDefaults($.dialog._defaults,settings,"styleClass"),height=$.bowknot.getDefaults($.dialog._defaults,settings,"height"),width=$.bowknot.getDefaults($.dialog._defaults,settings,"width");var bgHTML="<div id='"+id+"BG' class='"+styleClass.backgroundClass+"'></div>",dialogHTML="<div id='"+id+"Dialog' class='"+styleClass.panelClass+"'>",closeHTML="";if(settings.closeEvent){closeHTML="<div class='"+styleClass.closeClass+"' onclick=\""+settings.closeEvent+";\"></div>"}else{closeHTML="<div class='"+styleClass.closeClass+"' onclick=\"$.dialog._close('"+id+"');\"></div>"}dialogHTML+=closeHTML+"<div class='bowknot-clear'></div><div id='"+id+"Content' class='"+styleClass.contentClass+"' style='height:"+($.bowknot.strToInt(height)-44)+"px'></div></div>";$("#"+id).wrap("<div id='"+id+"Wrap'></div>");var cloneObj=$("#"+id).clone(true);$("#"+id).remove();$('body').append(bgHTML+dialogHTML);cloneObj.prependTo("#"+id+"Content");$("#"+id).show();$("#"+id+"Dialog").show(200).css({height:height,width:width,top:(document.documentElement.clientHeight-$.bowknot.strToInt(height))/2,left:(document.documentElement.clientWidth-$.bowknot.strToInt(width))/2})},_close:function(id){$("#"+id+"BG").remove();$("#"+id).clone(true).prependTo("#"+id+"Wrap");$("#"+id).hide();$("#"+id+"Dialog").remove()},_closeDialog:function(target){$.dialog._close(target.id)}});$.fn.dialog=function(options){var otherArgs=Array.prototype.slice.call(arguments);return this.each(function(){typeof options=='string'?$.dialog['_'+options+'Dialog'].apply($.dialog,[this].concat(otherArgs)):$.dialog._attach(this,options)})};$.dialog=new Dialog();window['DP_jQuery_'+dpuuid]=$})(jQuery);
(function($){$.fn.extend({completed:{version:"0.0.0.7",author:"lly219@gmail.com"}});var j=new Date().getTime();var k='completed';var l=function(){this._defaults={"styleClass":{"panelClass":"completed-panel"},separator:","},this._settingsDataFormat={}};$.extend(l.prototype,{_attach:function(a,b){if(!a.id){this.uuid++;a.id='dp'+this.uuid}var c=this._newInst($(a));c.settings=$.extend({},b||{});$.data(a,k,c);this._init(a)},_newInst:function(a){var b=a[0].id.replace(/([^A-Za-z0-9_])/g,'\\\\$1');return{id:b}},_getInst:function(a){try{return $.data(a,k)}catch(err){throw'Missing instance data for this completed'}},_destroyCompleted:function(){},_init:function(target){var inst=this._getInst(target);var id=inst.id,settings=inst.settings,height=settings.height+"px";var $it=$("#"+id);var panel="<div id='"+id+"Panel' class='"+this._getDefaults($.completed._defaults,settings,"styleClass").panelClass+"' style='height:"+height+";'></div>";settings.data.sort();$it.after(panel).bind("keyup focus",{settings:settings},this._keyupAction);var $panel=$("#"+id+"Panel");settings.tipNum=0;$panel.width($it.width()-parseInt($panel.css("padding-top"))-parseInt($panel.css("padding-bottom"))).mouseover(function(){$panel.find("a").removeClass()});$(document).click(function(event){if(event.target.id!==id){$panel.hide()}})},_keyupAction:function(event){var settings=event.data.settings,currentWordObj=$.completed._getCurrentWord(this);var matchDatas=$.completed._getMatchData(settings.data,this.value,currentWordObj.currentWord);if(event.keyCode===38&&settings.tipNum>0){settings.tipNum--}if(event.keyCode===40&&settings.tipNum<matchDatas.length-1){settings.tipNum++}if(event.keyCode===13){$("#"+this.id+"Panel a").each(function(i){if(this.className==="selected"){settings.tipNum=i}});if(matchDatas[settings.tipNum]){var separator=$.completed._defaults.separator;if(currentWordObj.currentWord===""){this.value=this.value+matchDatas[settings.tipNum]+separator}else{var temp=this.value;this.value=temp.substring(0,currentWordObj.startPos)+matchDatas[settings.tipNum]+temp.substring(currentWordObj.endPos,temp.length)}matchDatas.splice(settings.tipNum,1);settings.tipNum=0}}$.completed._buildPanel(this.id,matchDatas,settings)},_getCurrentWord:function(it){var words=$(it).val(),curPos=it.selectionStart,tag=true,endPos=0,startPos=0,separator=$.completed._defaults.separator;if(words===""){return{currentWord:"",startPos:startPos,endPos:endPos}}for(var i=0;i<words.length;i++){if(words.charAt(i)===separator){if(i>=curPos&&tag){endPos=i;tag=false}}}if(tag===true){tag=false;endPos=words.length}for(var j=endPos;j>-1;j--){if(words.charAt(j)===separator){if(j<curPos&&!tag){startPos=j+1;tag=true}}}return{currentWord:words.substring(startPos,endPos),startPos:startPos,endPos:endPos}},_getMatchData:function(datas,currentWords,currentWord){var currentDatas=currentWords.split($.completed._defaults.separator);var matchDatas=[];for(var i=0;i<datas.length;i++){if(typeof datas[i]==="number"){datas[i]=datas[i].toString()}if(datas[i].toLowerCase().indexOf(currentWord.toLowerCase())>-1){matchDatas.push(datas[i])}}for(var j=0;j<matchDatas.length;j++){for(var k=0;k<currentDatas.length;k++){if(matchDatas[j]===currentDatas[k].toString()){matchDatas.splice(j,1);j--}}}return matchDatas},_buildPanel:function(id,matchDatas,settings){var $panel=$("#"+id+"Panel");if(matchDatas.length===0){$panel.html("").hide();return}var panelItemsHTML="";for(var i=0;i<matchDatas.length;i++){if(settings.tipNum===i){panelItemsHTML+="<a href='javascript:void(0);'\
onmouseout=\"this.className=''\"\
onmousemove=\"this.className='selected'\"class='selected'>" + matchDatas[i] + "</a>"}else{panelItemsHTML+="<a href='javascript:void(0);'\
onmouseout=\"this.className=''\"\
onmousemove=\"this.className='selected'\">" + matchDatas[i] + "</a>"}}$panel.html(panelItemsHTML).show();var $selectedItem=$("#"+id+"Panel a.selected");if($selectedItem.position().top+$panel.scrollTop()>50-$selectedItem.height()){$panel.scrollTop($selectedItem.position().top+$panel.scrollTop()+$selectedItem.height()-50)}if($selectedItem.position().top<0){$panel.scrollTop($panel.scrollTop-$selectedItem.height())}$("#"+id+"Panel a").click(function(){var target=document.getElementById(id);var currentWordObj=$.completed._getCurrentWord(document.getElementById(id));var matchDatas=$.completed._getMatchData(settings.data,target.value,currentWordObj.currentWord);$("#"+id+"Panel a").each(function(i){if(this.className==="selected"){settings.tipNum=i}});if(matchDatas[settings.tipNum]){var separator=$.completed._defaults.separator;if(currentWordObj.currentWord===""){target.value=target.value+matchDatas[settings.tipNum]+separator}else{var temp=target.value;target.value=temp.substring(0,currentWordObj.startPos)+matchDatas[settings.tipNum]+temp.substring(currentWordObj.endPos,temp.length)}matchDatas.splice(settings.tipNum,1);settings.tipNum=0}$.completed._buildPanel(id,matchDatas,settings)})},_getDefaults:function(defaults,settings,key){if(key==="styleClass"){if(settings.theme==="default"||settings.theme===undefined){return defaults.styleClass}settings.styleClass={};for(var styleName in defaults[key]){settings.styleClass[styleName]=settings.theme+"-"+defaults.styleClass[styleName]}}else if(key==="height"||key==="width"){if(settings[key]===null||settings[key]===undefined){return"auto"}else{return settings[key]+"px"}}else{if(settings[key]===null||settings[key]===undefined){return defaults[key]}}return settings[key]}});$.fn.completed=function(a){var b=Array.prototype.slice.call(arguments);return this.each(function(){typeof a=='string'?$.completed['_'+a+'Completed'].apply($.completed,[this].concat(b)):$.completed._attach(this,a)})};$.completed=new l();window['DP_jQuery_'+j]=$})(jQuery);
(function($){$.fn.extend({tip:{version:"0.0.0.3",author:"lly219@gmail.com"}});var f=new Date().getTime();var g='tip';var h=function(){this._defaults={"styleClass":{"panel":"tip-panel"}},this._settingsDataFormat={}};$.extend(h.prototype,{_attach:function(a,b){if(!a.id){this.uuid++;a.id='dp'+this.uuid}var c=this._newInst($(a));c.settings=$.extend({},b||{});$.data(a,g,c);this._init(a)},_newInst:function(a){var b=a[0].id.replace(/([^A-Za-z0-9_])/g,'\\\\$1');return{id:b}},_getInst:function(a){try{return $.data(a,g)}catch(err){throw'Missing instance data for this tip.';}},_destroyTip:function(a){$.removeData(a,g);$("#"+a.id+"Panel").remove()},_init:function(a){var b=this._getInst(a);var c=b.id,settings=b.settings;var d='',styleClass=settings.className?settings.className:this._getDefaults($.tip._defaults,settings,"styleClass").panel;d="<div id='"+c+"Panel' class='"+styleClass+"'>"+settings.content+"</div>";$(settings.appendId?"#"+settings.appendId:"body").append(d);$(a).hover(function(){$.tip._parsePosition(settings,a);$("#"+c+"Panel").fadeIn("normal")},function(){$("#"+c+"Panel").fadeOut("normal")})},_optionTip:function(a,b,c){var d=$.tip._getInst(a[0]);var e=d.settings;if(c){e[b]=c;$("#"+a[0].id+"Panel").html(c)}return e[b]},_parsePosition:function(a,b){var c="",$targetPanel=$("#"+b.id+"Panel");if(a.left===undefined&&a.right===undefined&&a.bottom===undefined&&a.top===undefined&&a.position===undefined){a.position="bottom"}if(a.position){var d=$(b);switch(a.position){case"top":c="left: "+parseInt(d.position().left)+"px; top: "+parseInt(d.position().top-$targetPanel.height()-6-parseInt(d.css("padding-top"))-parseInt($targetPanel.css("padding-top")))+"px;";break;case"bottom":c="left: "+parseInt(d.position().left)+"px; top: "+parseInt(d.position().top+d.height())+"px;";break;default:alert("Has no type!");break}$targetPanel.attr("style",c);return}if(a.left!==undefined){c+="left:"+a.left+"px;"}if(a.top!==undefined){c+="top:"+a.top+"px;"}if(a.bottom!==undefined){c+="bottom:"+a.bottom+"px;"}if(a.right!==undefined){c+="right:"+a.right+"px;"}$targetPanel.attr("style",c)},_getDefaults:function(a,b,c){if(c==="styleClass"){if(b.theme==="default"||b.theme===undefined){return a.styleClass}b.styleClass={};for(var d in a[c]){b.styleClass[d]=b.theme+"-"+a.styleClass[d]}}else if(c==="height"||c==="width"){if(b[c]===null||b[c]===undefined){return"auto"}else{return b[c]+"px"}}else{if(b[c]===null||b[c]===undefined){return a[c]}}return b[c]}});$.fn.tip=function(a){var b=Array.prototype.slice.call(arguments);if(a==="option"){b.shift();return $.tip['_'+a+'Tip'].apply($.tip,[this].concat(b))}return this.each(function(){typeof a=='string'?$.tip['_'+a+'Tip'].apply($.tip,[this].concat(b)):$.tip._attach(this,a)})};$.tip=new h();window['DP_jQuery_'+f]=$})(jQuery);